<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>轨迹压缩算法对比平台</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>轨迹压缩算法对比平台</h1>
            <p class="subtitle">基于多种算法的在线轨迹简化与性能评估</p>
        </header>

        <div class="main-content">
            <!-- 左侧控制面板 -->
            <div class="control-panel">
                <div class="panel-section">
                    <h3>数据集选择</h3>
                    <select id="dataset-select" class="form-control">
                        <option value="">加载中...</option>
                    </select>

                    <div class="form-group">
                        <label for="mmsi-input">MMSI (可选):</label>
                        <input type="number" id="mmsi-input" class="form-control" placeholder="输入船舶 MMSI">
                    </div>

                    <div class="form-group">
                        <label for="speed-segment">速度段筛选:</label>
                        <select id="speed-segment" class="form-control">
                            <option value="">全部</option>
                            <option value="low">低速 (0-3节)</option>
                            <option value="medium">中速 (3-12节)</option>
                            <option value="high">高速 (12+节)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="max-samples">最大采样数 (可选):</label>
                        <input type="number" id="max-samples" class="form-control" placeholder="留空使用全部数据">
                    </div>
                </div>

                <div class="panel-section">
                    <h3>算法选择</h3>
                    <div class="algorithm-list">
                        <label class="checkbox-label">
                            <input type="checkbox" value="dr" checked>
                            <span class="checkmark"></span>
                            自适应 Dead Reckoning (DR)
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="fixed_dr">
                            <span class="checkmark"></span>
                            固定阈值 DR
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="semantic_dr">
                            <span class="checkmark"></span>
                            语义增强 DR
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="sliding">
                            <span class="checkmark"></span>
                            Sliding Window
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="opening">
                            <span class="checkmark"></span>
                            Opening Window
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" value="squish">
                            <span class="checkmark"></span>
                            SQUISH
                        </label>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>参数设置</h3>
                    <div id="params-container">
                        <!-- 算法参数面板将动态生成 -->
                    </div>
                </div>

                <div class="panel-section">
                    <button id="run-btn" class="btn btn-primary">运行压缩</button>
                    <div id="status-message" class="status-message"></div>
                </div>
            </div>

            <!-- 右侧地图和结果区域 -->
            <div class="results-panel">
                <!-- 图层控制 -->
                <div class="layer-controls">
                    <h4>图层控制</h4>
                    <div class="layer-switches">
                        <label class="switch-label">
                            <input type="checkbox" id="show-original" checked>
                            <span class="switch-slider"></span>
                            显示原始轨迹
                        </label>
                        <div id="algorithm-layers">
                            <!-- 算法图层开关将动态生成 -->
                        </div>
                    </div>
                </div>

                <!-- 地图容器 -->
                <div class="map-container">
                    <iframe id="trajectory-map" src="trajectory_viewer.html" frameborder="0"></iframe>
                </div>

                <!-- 结果表格 -->
                <div class="results-table-container">
                    <h4>性能对比</h4>
                    <div class="table-controls">
                        <button id="export-csv" class="btn btn-secondary">导出 CSV</button>
                        <button id="refresh-results" class="btn btn-secondary">刷新结果</button>
                    </div>
                    <table id="results-table" class="results-table">
                        <thead>
                            <tr>
                                <th>算法</th>
                                <th>压缩率 (%)</th>
                                <th>运行时间 (ms)</th>
                                <th>SED Mean (m)</th>
                                <th>SED Max (m)</th>
                                <th>SED P95 (m)</th>
                                <th>事件保留率 (%)</th>
                            </tr>
                        </thead>
                        <tbody id="results-body">
                            <tr>
                                <td colspan="7" class="no-data">暂无数据，请先运行压缩算法</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载动画 -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">正在处理中...</div>
    </div>

    <script src="app.js"></script>
</body>
</html>

